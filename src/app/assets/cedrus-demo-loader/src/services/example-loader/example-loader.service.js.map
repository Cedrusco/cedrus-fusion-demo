{"version":3,"file":"example-loader.service.js","sourceRoot":"","sources":["example-loader.service.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,sCAAmD;AACnD,sCAA+C;AAG/C,8CAA6C;AAC7C,iCAA+B;AAC/B,mCAAiC;AAGjC,IAAa,oBAAoB;IAI/B,8BACU,IAAU;QAAV,SAAI,GAAJ,IAAI,CAAM;QAHpB,eAAU,GAAG,kCAAkC,CAAC;IAK5C,CAAC;IAEL,wCAAS,GAAT,UAAU,IAAI,EAAE,IAAI,EAAE,MAAM;QAC1B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,MAAI,IAAI,SAAI,IAAI,SAAI,MAAQ,CAAC;aAC/C,GAAG,CAAC,UAAC,GAAa,IAAK,OAAA,GAAG,CAAC,IAAI,EAAE,EAAV,CAAU,CAAC;aAClC,KAAK,CAAC,UAAC,GAAQ,IAAK,OAAA,uBAAU,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,KAAK,IAAI,cAAc,CAAC,EAApD,CAAoD,CAAC,CAAC;IAC/E,CAAC;IAED,mDAAoB,GAApB,UAAqB,MAAW;QAC9B,IAAM,IAAI,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAEhC,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC;QAC/C,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,aAAa,EAAE,EAAE,CAAC,CAAC;QAEvC,IAAA,kBAAI,EAAE,kBAAI,CAAY;QACxB,IAAA,kBAKW,EAJf,wBAAS,EACT,sBAAQ,EACR,kBAAM,EACN,sBAAQ,CACQ;QAElB,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;QAC/C,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,SAAS,EAAE,YAAY,CAAC,CAAC;QACrD,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,IAAI,EAAE,WAAW,CAAC,CAAC;QAC/C,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;QACjD,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,IAAI,EAAE,UAAU,CAAC,CAAC;QAC9C,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,QAAQ,EAAE,oBAAoB,CAAC,CAAC;QAE5D,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,+CAAgB,GAAhB,UAAiB,IAAqB,EAAE,OAAe,EAAE,QAAgB;QACvE,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,WAAS,QAAQ,MAAG,EAAE,OAAO,CAAC,CAAC;IAC7D,CAAC;IAED,+CAAgB,GAAhB,UAAiB,IAAqB,EAAE,IAAY,EAAE,KAAa;QACjE,IAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QAE9C,KAAK,CAAC,IAAI,GAAI,QAAQ,CAAC;QACvB,KAAK,CAAC,IAAI,GAAI,IAAI,CAAC;QACnB,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;QAEpB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;IAC1B,CAAC;IAED,0CAAW,GAAX;QACE,IAAM,IAAI,GAAI,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QAE7C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC;QAC9B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;QAEvB,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEH,2BAAC;AAAD,CAAC,AA/DD,IA+DC;AA/DY,oBAAoB;IADhC,iBAAU,EAAE;qCAMK,WAAI;GALT,oBAAoB,CA+DhC;AA/DY,oDAAoB","sourcesContent":["import { Injectable, Inject } from '@angular/core';\nimport { Http, Response } from '@angular/http';\nimport { Config, Docs } from '../../models';\n\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/catch';\n\n@Injectable()\nexport class ExampleLoaderService {\n\n  plunkerUrl = 'https://plnkr.co/edit/?p=preview';\n\n  constructor(\n    private http: Http,\n    // @Inject(Config) private config: Config,\n  ) { }\n\n  getSource(type, name, number): Observable<{}> {\n    return this.http.get(`/${type}/${name}/${number}`)\n      .map((res: Response) => res.json())\n      .catch((err: any) => Observable.throw(err.json().error || 'Server Error'));\n  }\n\n  constructPlunkerForm(source: any): HTMLFormElement {\n    const form = this._createForm();\n\n    this._appendFormInput(form, 'private', 'true');\n    this._appendFormInput(form, 'description', '');\n\n    const { html, sass } = source;\n    const {\n      indexHtml,\n      systemJs,\n      mainTs,\n      plunkrTs\n    } = source.plunkr;\n\n    this._addSourceToForm(form, mainTs, 'main.ts');\n    this._addSourceToForm(form, indexHtml, 'index.html');\n    this._addSourceToForm(form, html, 'demo.html');\n    this._addSourceToForm(form, plunkrTs, 'demo.ts');\n    this._addSourceToForm(form, sass, 'demo.css');\n    this._addSourceToForm(form, systemJs, 'systemjs.config.js');\n\n    return form;\n  }\n\n  _addSourceToForm(form: HTMLFormElement, content: string, filename: string): void {\n    this._appendFormInput(form, `files[${filename}]`, content);\n  }\n\n  _appendFormInput(form: HTMLFormElement, name: string, value: string): void {\n    const input = document.createElement('input');\n\n    input.type  = 'hidden';\n    input.name  = name;\n    input.value = value;\n\n    form.appendChild(input);\n  }\n\n  _createForm(): HTMLFormElement {\n    const form  = document.createElement('form');\n\n    form.action = this.plunkerUrl;\n    form.method = 'post';\n    form.target = '_blank';\n\n    return form;\n  }\n\n}\n"]}